{
  "version": 4,
  "terraform_version": "0.12.25",
  "serial": 2,
  "lineage": "eb54d2c9-399f-831e-5d11-a7f65525f772",
  "outputs": {},
  "resources": [
    {
      "module": "module.webapi1",
      "mode": "data",
      "type": "http",
      "name": "deployjson",
      "provider": "provider.http",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "body": "{\n    \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n    \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n      \"siteName\": {\n        \"type\": \"string\",\n        \"metadata\": {\n          \"description\": \"The name of the web app that you wish to create.\"\n        }\n      },\n      \"hostingPlanName\": {\n        \"type\": \"string\",\n        \"metadata\": {\n          \"description\": \"The name of the App Service plan to use for hosting the web app.\"\n        }\n      },\n      \"sku\": {\n        \"type\": \"string\",\n        \"allowedValues\": [\n          \"F1\",\n          \"D1\",\n          \"B1\",\n          \"B2\",\n          \"B3\",\n          \"S1\"\n        ],\n        \"defaultValue\": \"F1\",\n        \"metadata\": {\n          \"description\": \"The pricing tier for the hosting plan.\"\n        }\n      },\n      \"repoURL\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"https://github.com/michaeldeongreen/monolithic-repo-multiple-deployment.git\",\n        \"metadata\": {\n          \"description\": \"The URL for the GitHub repository that contains the project to deploy.\"\n        }\n      },\n      \"branch\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"master\",\n        \"metadata\": {\n          \"description\": \"The branch of the GitHub repository to use.\"\n        }\n      },\n      \"location\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"[resourceGroup().location]\",\n        \"metadata\": {\n          \"description\": \"Location for all resources.\"\n        }\n      },\n      \"project\": {\n        \"type\": \"string\",\n        \"metadata\": {\n          \"description\": \"The project to deploy.\"\n        }\n      }\n    },\n    \"resources\": [\n      {\n        \"apiVersion\": \"2015-08-01\",\n        \"name\": \"[parameters('hostingPlanName')]\",\n        \"type\": \"Microsoft.Web/serverfarms\",\n        \"location\": \"[parameters('location')]\",\n        \"sku\": {\n          \"name\": \"[parameters('sku')]\",\n          \"capacity\": \"0\"\n        },\n        \"properties\": {\n          \"name\": \"[parameters('hostingPlanName')]\"\n        }\n      },\n      {\n        \"apiVersion\": \"2015-08-01\",\n        \"name\": \"[parameters('siteName')]\",\n        \"type\": \"Microsoft.Web/sites\",\n        \"location\": \"[parameters('location')]\",\n        \"dependsOn\": [\n          \"[resourceId('Microsoft.Web/serverfarms', parameters('hostingPlanName'))]\"\n        ],\n        \"properties\": {\n          \"serverFarmId\": \"[parameters('hostingPlanName')]\",\n          \"siteConfig\": {\n                \"webSocketsEnabled\": true\n          }\n        },\n        \"resources\": [\n          {\n            \"apiVersion\": \"2015-08-01\",\n            \"name\": \"web\",\n            \"type\": \"sourcecontrols\",\n            \"dependsOn\": [\n              \"[resourceId('Microsoft.Web/Sites', parameters('siteName'))]\"\n            ],\n            \"properties\": {\n              \"RepoUrl\": \"[parameters('repoURL')]\",\n              \"branch\": \"[parameters('branch')]\",\n              \"IsManualIntegration\": true\n            }\n          }\n        ]\n      },\n      {\n        \"name\": \"appsettings\",\n        \"type\": \"Microsoft.Web/sites/config\",\n        \"apiVersion\": \"2018-11-01\",\n        \"dependsOn\": [\n            \"[resourceId('Microsoft.Web/Sites', parameters('siteName'))]\"\n        ],\n        \"properties\": {\n            \"PROJECT\": \"[parameters('project')]\"\n        }\n      }\n    ]\n  }",
            "id": "2020-06-05 00:10:25.393963798 +0000 UTC",
            "request_headers": null,
            "response_headers": {
              "Accept-Ranges": "bytes",
              "Access-Control-Allow-Origin": "*",
              "Cache-Control": "max-age=300",
              "Connection": "keep-alive",
              "Content-Security-Policy": "default-src 'none'; style-src 'unsafe-inline'; sandbox",
              "Content-Type": "text/plain; charset=utf-8",
              "Date": "Fri, 05 Jun 2020 00:10:25 GMT",
              "Etag": "W/\"666a170787af1142593acc072bbea8b504d0bb4c5919ea141a901dfe1370e61c\"",
              "Expires": "Fri, 05 Jun 2020 00:15:25 GMT",
              "Source-Age": "31",
              "Strict-Transport-Security": "max-age=31536000",
              "Vary": "Authorization,Accept-Encoding",
              "Via": "1.1 varnish (Varnish/6.0), 1.1 varnish",
              "X-Cache": "MISS, HIT",
              "X-Cache-Hits": "0, 1",
              "X-Content-Type-Options": "nosniff",
              "X-Fastly-Request-Id": "f7012a6e1e5f0636e5d1453272533f617589639d",
              "X-Frame-Options": "deny",
              "X-Github-Request-Id": "2BFE:6642:1A4C6:204B7:5ED98D51",
              "X-Served-By": "cache-dfw18635-DFW",
              "X-Timer": "S1591315825.386145,VS0,VE2",
              "X-Xss-Protection": "1; mode=block"
            },
            "url": "https://raw.githubusercontent.com/michaeldeongreen/monolithic-repo-multiple-deployment/master/azuredeploy.json"
          }
        }
      ]
    },
    {
      "module": "module.resourcegroup",
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "resource_group",
      "provider": "provider.azurerm",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/afb7ab69-7c5f-41b6-8df4-3dcd4c459ff4/resourceGroups/rg-mgreen-multideploy-dev",
            "location": "eastus",
            "name": "rg-mgreen-multideploy-dev",
            "tags": {
              "environment": "development"
            }
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.webapi1",
      "mode": "managed",
      "type": "azurerm_template_deployment",
      "name": "webapi1_deploy",
      "each": "list",
      "provider": "provider.azurerm",
      "instances": []
    }
  ]
}
